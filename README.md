# Тестовое задание для Python разработчика
## Описание
Приложение представляет собой простой сервер для создания платежных форм, используя Stripe
Содержит следующие модели:
- Item(поля name, description, price, currency) - модель товара c поддержкой разных
валют(в проекте используются USD(по умолчанию) и EUR)
- Discount, Tax(поля name, percentage) - модели для скидок и налогов/сборов, которые 
применяются к Order
- Order(поля items, tax, discount) - модель заказа с возможностью применения скидок и
налогов/сборов к заказу.
Доступны следующие эндпойнты:
- /item/{id}/ - возвращает простую .html страницу с информацией о товаре и кнопкой для
покупки, по нажатию на которую происходит создание Stripe.session для выбранного Item
- /item/{id}/buy/ - метод для получения Stripe.session.id для перехода к checkout
- /order/{id}, /order/{id}/buy - аналогичные методы для модели Order, которая
позволяет объединить несколько Item и добавить к ним Tax и Discount, которые 
отображаются в Stripe Checkout форме

На сервере создано несколько тестовых Item и Order с примененными скидками, они доступны
по item/1,item/2 и order/1, order/2
## Запуск
Клонировать репозиторий с проектом
Далее приложение можно запускать разными способами:
1. Локально
- создать и активировать виртуальное окружение

```python -m venv venv```

```source venv/bin/activate```
- установить зависимости

```pip install -r requirements.txt```
- добавить файл local_settings.py, чтобы локально приложение использовало sqlite

``` from pathlib import Path
BASE_DIR = Path(__file__).resolve().parent.parent

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
} 
```
- применить миграции

```python manage.py migrate```
- запустить приложение

```python manage.py runserver```

2. С помощью Docker(подразумевается, что Docker установлен)
- запустить docker-compose файл

``` docker compose up --build -d ```
## Примечания
- так как в приложении реализованы и модель Item, и модель Order, структура эндпойнтов
отличается от заданной в ТЗ, для поддержки оплаты и того, и того по отдельности
- при добавлении в Order товаров с разными валютами, испоьзоваться будет валюта первого
из товаров
- скидки и налоговые ставки создаются при создании сессии Stripe, в будущем будет
оптимальнее проверять их наличие перед созданием